import{a as r}from"./chunk-WPVVOPFH.js";import"./chunk-K4S2F2HR.js";import{a as l,b as n,c as a}from"./chunk-M2GC6G3U.js";import{j as o}from"./chunk-WEZIIHAB.js";var i=class extends n{constructor(){super(...arguments);this.hasLoadingStarted=!1;this.isGlobeLoaded=!1}connect(){return o(this,null,function*(){if(this.el.dataset.jsGlobeConfig)try{let e=JSON.parse(this.el.dataset.jsGlobeConfig);e.constructor.name==="Object"&&(this.globeConfig=e)}catch(e){l.warn("Failed to load globe config.",e)}this.triggerPoint=this.el;let t=this.el.closest(".Section");t&&t.previousElementSibling&&t.previousElementSibling.previousElementSibling&&(this.triggerPoint=t.previousElementSibling.previousElementSibling),this.triggerScrollObserver=yield r.create(.001,!0),this.triggerScrollObserver.observe(this.triggerPoint),this.triggerScrollObserver.onIntersect(()=>o(this,null,function*(){yield this.importGlobe();let e=this.globe;e&&e.play()})),this.playPauseScrollObserver=yield r.create(.001,!1),this.playPauseScrollObserver.observe(this.el),this.playPauseScrollObserver.onIntersect(()=>o(this,null,function*(){yield this.importGlobe();let e=this.globe;e&&e.play()})),this.playPauseScrollObserver.onSeparate(()=>{!this.isGlobeLoaded||this.globe&&this.globe.pause()})})}disconnect(){this.triggerScrollObserver.disconnect(),this.playPauseScrollObserver.disconnect()}importGlobe(){return o(this,null,function*(){if(this.hasLoadingStarted)return;this.hasLoadingStarted=!0;let t=this.el.querySelector(".js-globe");if(t){let{Globe:e}=yield import("./Globe-OC67W3OR.js");this.isGlobeLoaded=!0,this.globe=new e(t,this.globeConfig);let s=this.el.dataset.jsCountryList;this.globe&&(this.globe.load(),s&&this.globe.setCountryList(s.split(",")))}})}};a.register("BackgroundGlobe",i);
